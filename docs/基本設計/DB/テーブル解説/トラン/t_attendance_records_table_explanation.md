# `t_attendance_records` テーブル構成の解説

このテーブルは、従業員の勤怠打刻データ（出勤・退勤・休憩開始・休憩終了）を記録するトランザクションテーブルです。

| カラム名       | 型          | 説明                                                   | NULL許容 |
|----------------|-------------|----------------------------------------------------------|----------|
| `id`           | `UUID`      | 勤怠打刻レコードの一意識別子。主キー。                 | ❌       |
| `employee_id`  | `UUID`      | 打刻対象の従業員ID。`m_employees.id` を参照。           | ❌       |
| `office_id`    | `UUID`      | 打刻が行われた事業所ID。`m_offices.id` を参照。         | ❌       |
| `type`         | `VARCHAR`   | 打刻の種別。`clock_in`, `clock_out`, `break_start`, `break_end` 等。 | ❌       |
| `timestamp`    | `TIMESTAMP` | 打刻時刻。                                              | ❌       |
| `gps_lat`      | `DECIMAL`   | 緯度情報（任意、GPS打刻機能用）。                      | ⭕       |
| `gps_lng`      | `DECIMAL`   | 経度情報（任意、GPS打刻機能用）。                      | ⭕       |
| `ip_address`   | `INET`      | 打刻時のIPアドレス（オプションのセキュリティ用途）。   | ⭕       |
| `created_at`   | `TIMESTAMP` | レコード作成時刻。自動で現在時刻が挿入されます。       | ⭕（DEFAULTあり） |

---

## 備考

- 勤怠イベントごとに1レコードを登録する構造（1日1レコードではなく「打刻単位」で記録）。
- `type` カラムによりイベントの種別を判定し、出退勤・休憩の時系列処理が可能。
- GPS情報やIPアドレスにより不正打刻の検出や位置制限の実装が可能。
- 勤怠集計処理の入力データ元として、非常に重要な役割を担います。
